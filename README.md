# Проектная работа "Веб-ларек"

## Используемый стек
- **HTML**
- **SCSS**
- **TypeScript**
- **WebPack**

---

## Структура проекта
- `src/` — исходные файлы проекта
- `src/components/` — папка с JS компонентами
- `src/components/base/` — папка с базовым кодом

---

## Важные файлы
- `src/pages/index.html` — HTML-файл главной страницы
- `src/types/index.ts` — файл с основными типами
- `src/index.ts` — точка входа приложения
- `src/scss/styles.scss` — корневой файл стилей
- `src/utils/constants.ts` — файл с константами
- `src/utils/utils.ts` — файл с утилитами

---

## Установка и запуск
Для установки и запуска проекта выполните команды:

```bash
npm install
npm run start
```

или

```bash
yarn
yarn start
```

---

## Сборка
Для сборки проекта выполните:

```bash
npm run build
```

или

```bash
yarn build
```

---

## Описание базовых классов

### Класс `EventEmitter`
**Описание:** реализует брокер событий для управления подписками и вызовами событий.  
**Функции:**
- `on` — подписывает обработчик на событие.
- `off` — удаляет обработчик события.
- `emit` — инициирует событие с передачей данных.

### Класс `Component`
**Описание:** базовый класс для взаимодействия с компонентами.  
**Функции:**
- `toggleClass` — переключает класс у элемента.
- `setText` — устанавливает текстовое содержимое элемента.
- `setDisabled` — изменяет состояние блокировки элемента.
- `render` — возвращает корневой DOM-элемент.

---

## События приложения `AppEvents`
**Описание:** содержит список всех событий, используемых в приложении.
- `modalOpen` — открытие модального окна.
- `modalClose` — закрытие модального окна.
- `itemSelected` — выбор карточки товара
- `itemsChanged` — изменение данных в модели товаров.
- `itemAddCart` — добавление товара в корзину.
- `deleteItemFromOrder` — удаление товара из корзины.
- `openCart` —  открытие корзины.
- `buyCart` —  переход к форме способа оплаты
- `changePayment` — изменение способа оплаты.
- `changeAddress` — ввод адреса доставки.
- `paymentSubmit` — переход к форме с контактной информацией.
- `changeEmail` — ввод email.
- `changePhone` — ввод номера телефона.
- `contactsSubmit` — нажатие кнопки для оплаты заказа.
- `formErrors` — изменение объекта ошибок формы.

## Описание основных интерфейсов данных

### Интерфейс `IProduct`
**Описание:** описывает данные о товаре.  
**Поля:**
- `id: string` — уникальный идентификатор.
- `description: string` — описание.
- `image: string` — URL изображения.
- `title: string` — название.
- `category: string` — категория.
- `price: number | null` — цена.
- `inCart: boolean` — флаг, указывающий, находится ли товар в корзине.

---

### Тип `PaymentMethod`
**Описание:** определяет способы оплаты.  
**Возможные значения:**
- `'card'` — оплата картой.
- `'cash'` — оплата наличными.

---

### Интерфейс `IUserData`
**Описание:** описывает данные пользователя.  
**Поля:**
- `payment: PaymentMethod` — выбранный способ оплаты.
- `email: string` — email пользователя.
- `phone: string` — номер телефона пользователя.
- `address: string` — адрес доставки.

---

### Интерфейс `IOrder`
**Описание:** описывает данные заказа, расширяет интерфейс `IUserData`.  
**Поля:**
- `total: number` — общая стоимость заказа.
- `items: string[]` — список идентификаторов товаров в заказе.

---

### Интерфейс `IOrderResult`
**Описание:** описывает результат заказа, полученный с сервера.  
**Поля:**
- `id: string` — уникальный идентификатор заказа.
- `total: number` — общая стоимость заказа.

## Описание компонентов

### Компоненты корзины

#### Класс `Basket`
**Описание:** отображает корзину с товарами.  
**Функции:**
- `set total` — устанавливает общую стоимость товаров.
- `set productList` — обновляет список товаров в корзине.

#### Класс `ProductCardInBasket`
**Описание:** отображает карточку товара в корзине.  
**Функции:**
- `set index` — устанавливает порядковый номер товара.
- `set title` — устанавливает название товара.
- `set price` — устанавливает цену товара.
- `set id` — устанавливает ID товара.

---

### Компоненты заказа

#### Класс `orderPaymentForm`
**Описание:** форма для выбора способа оплаты и ввода адреса доставки.  
**Функции:**
- `set payment` — устанавливает выбранный способ оплаты.
- `set address` — устанавливает адрес доставки.

#### Класс `orderContactForm`
**Описание:** форма для ввода контактной информации (email и телефон).  
**Функции:**
- `set email` — устанавливает email.
- `set phone` — устанавливает номер телефона.

#### Класс `orderSuccess`
**Описание:** отображает сообщение об успешном оформлении заказа.  
**Функции:**
- `set total` — отображает общую стоимость заказа.

---

### Компоненты каталога

#### Класс `ProductCard`
**Описание:** отображает карточку товара.  
**Функции:**
- `set id` — устанавливает ID товара.
- `set title` — устанавливает название товара.
- `set category` — устанавливает категорию товара.
- `set image` — устанавливает изображение товара.
- `set price` — устанавливает цену товара.

#### Класс `ProductCardPreview`
**Описание:** отображает подробную карточку товара.  
**Функции:**
- `set description` — устанавливает описание товара.
- `changeActiveButton` — изменяет состояние кнопки "В корзину".

---

### Компоненты страницы

#### Класс `Page`
**Описание:** управляет отображением страницы.  
**Функции:**
- `set counter` — обновляет счетчик товаров в корзине.
- `set catalog` — обновляет список товаров в каталоге.
- `set locked` — блокирует или разблокирует прокрутку страницы.

#### Класс `Modal`
**Описание:** управляет модальными окнами.  
**Функции:**
- `set content` — устанавливает содержимое модального окна.
- `open` — открывает модальное окно.
- `close` — закрывает модальное окно.

---

## Модели данных

### Класс `ProductModel`
**Описание:** управляет данными о товарах.  
**Хранит:**
-  `id: string` — ид
-  `description: string` — описание 
-  `image: string` — картинка
-  `title: string` — название
-  `category: string` — категория
-  `price: number | null` — стоимость
-  `inCart: boolean` — находится ли товар в корзине

**Функции:**
- `setProducts` — устанавливает список товаров.
- `getProducts` — возвращает список товаров.
- `getProduct` — возвращает данные о конкретном товаре.
- `toggleInCart` — переключает состояние "в корзине" для товара.

### Класс `OrderModel`
**Описание:** управляет данными о заказе.  
**Хранит:**
- `items: string[]` — массив с Id товаров в коризне,
- `total: number`  — общая стоимость товаров,
- `payment: PaymentMethod`  — выбранный способ оплаты,
- `address: string`  — адрес доставки,
- `email: string`  — почта,
- `phone: string`  — номер телефона.

**Функции:**
- `set PaymentMethod` — устанавливает способ оплаты.
- `set Address` — устанавливает адрес доставки.
- `set Email` — устанавливает email.
- `set Phone` — устанавливает номер телефона.
- `addProductInCart` — добавляет товар в корзину.
- `delProductInCart` — удаляет товар из корзины.
- `clearOrder` — очищает данные заказа.
- `validateOrder` — проверяет валидность данных заказа.

---

## API

### Класс `larekAPI`
**Описание:** взаимодействует с сервером.  
**Функции:**
- `getProductList` — получает список товаров.
- `getProductItem` — получает данные о конкретном товаре.
- `postOrder` — отправляет данные заказа на сервер.

---

## Утилиты

### Функции
- `ensureElement` — проверяет существование элемента в DOM.
- `cloneTemplate` — клонирует содержимое шаблона.