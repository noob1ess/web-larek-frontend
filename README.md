# Проектная работа "Веб-ларек"

## Используемый стек
- **HTML**
- **SCSS**
- **TypeScript**
- **WebPack**

---

## Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

## Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание базовых классов, их предназначений и функций

### Класс `EventEmitter`
- **Описание**: реализует брокер событий для управления подписками и вызовами событий.
- **Функции**:
  - `on` — подписывает обработчик на событие.
  - `off` — удаляет обработчик события.
  - `emit` — инициирует событие с передачей данных.
  - `onAll` — подписывает обработчик на все события.
  - `offAll` — удаляет все обработчики событий.
  - `trigger` — создает триггер для генерации события.

---

### Класс `Api`
- **Описание**: предоставляет базовые методы для взаимодействия с сервером.
- **Поля**:
  - `baseUrl: string` — базовый URL API.
  - `options: RequestInit` — настройки запросов.
- **Функции**:
  - `get(uri: string): Promise<object>` — выполняет GET-запрос.
  - `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>` — выполняет POST/PUT/DELETE-запрос.
  - `handleResponse(response: Response): Promise<object>` — обрабатывает ответ сервера.

---

## Описание компонентов, их функций и связей с другими компонентами

### Отображение
- **Компонент `CatalogView`**:
  - Отображает список товаров.
  - Использует компонент `ProductCardView` для отображения каждого товара.
  - Передает действия пользователя (например, выбор товара) в `CatalogPresenter`.

- **Компонент `ProductCardView`**:
  - Отображает информацию о товаре (категория, название, картинка, стоимость).
  - Передает действия пользователя (например, клик на товар) в `ProductPresenter`.
  - Метод `setButtonState` управляет состоянием кнопки "Купить".

- **Компонент `CartView`**:
  - Отображает содержимое корзины.
  - Передает действия пользователя (например, удаление товара) в `CartPresenter`.
  - Метод `setCheckoutButtonState` управляет состоянием кнопки "Оформить".

- **Компонент `ModalView`**:
  - Отображает модальные окна (например, детали товара, оформление заказа).
  - Передает действия пользователя в соответствующий `Presenter`.

---

### Презентеры
1. **`CatalogPresenter`**:
   - Загружает данные о товарах из модели `CatalogModel`.
   - Передает данные в `CatalogView` для отображения.
   - Обрабатывает действия пользователя (например, выбор товара) и инициирует соответствующие действия в модели.

2. **`ProductPresenter`**:
   - Получает данные о выбранном товаре из модели `ProductModel`.
   - Передает данные в `ProductCardView` для отображения.
   - Обрабатывает действия пользователя (например, добавление товара в корзину).

3. **`CartPresenter`**:
   - Управляет состоянием корзины через модель `CartModel`.
   - Передает данные в `CartView` для отображения.
   - Обрабатывает действия пользователя (например, удаление товара, оформление заказа).

4. **`OrderPresenter`**:
   - Обрабатывает данные заказа через модель `OrderModel`.
   - Передает данные в `ModalView` для отображения.
   - Отправляет данные заказа на сервер через `Api`.

---

### Модели
1. **`CatalogModel`**:
   - Загружает список товаров с сервера через `Api.get()`.
   - Хранит данные о товарах.

2. **`ProductModel`**:
   - Хранит данные о выбранном товаре.

3. **`CartModel`**:
   - Управляет состоянием корзины (добавление, удаление, очистка).
   - Хранит список товаров в корзине.

4. **`OrderModel`**:
   - Хранит данные о заказе (способ оплаты, адрес доставки, контактные данные).
   - Отправляет данные заказа на сервер через `Api.post()`.

---